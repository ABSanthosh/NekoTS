var m=Object.defineProperty;var u=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s=(n,e,t)=>(u(n,typeof e!="symbol"?e+"":e,t),t);const p="data:image/gif;base64,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";var k=(n=>(n[n.SMALL=32]="SMALL",n[n.MEDIUM=38]="MEDIUM",n[n.LARGE=42]="LARGE",n))(k||{});class f{constructor(e){s(this,"size",32);s(this,"isAwake",!0);s(this,"nekoEl");s(this,"nekoId",0);s(this,"nekoPosX",this.size/2);s(this,"nekoPosY",this.size/2);s(this,"mousePosX",this.size/2);s(this,"mousePosY",this.size/2);s(this,"isReduced",window.matchMedia("(prefers-reduced-motion: reduce)").matches);s(this,"mouseMoveController",new AbortController);s(this,"touchController",new AbortController);s(this,"frameCount",0);s(this,"idleTime",0);s(this,"idleAnimation",null);s(this,"idleAnimationFrame",0);s(this,"nekoSpeed",10);s(this,"distanceFromMouse",25);s(this,"origin",{x:0,y:0});s(this,"spriteSets",{idle:[[-3,-3]],alert:[[-7,-3]],scratchSelf:[[-5,0],[-6,0],[-7,0]],scratchWallN:[[0,0],[0,-1]],scratchWallS:[[-7,-1],[-6,-2]],scratchWallE:[[-2,-2],[-2,-3]],scratchWallW:[[-4,0],[-4,-1]],tired:[[-3,-2]],sleeping:[[-2,0],[-2,-1]],N:[[-1,-2],[-1,-3]],NE:[[0,-2],[0,-3]],E:[[-3,0],[-3,-1]],SE:[[-5,-1],[-5,-2]],S:[[-6,-3],[-7,-2]],SW:[[-5,-3],[-6,-1]],W:[[-4,-2],[-4,-3]],NW:[[-1,0],[-1,-1]]});s(this,"maxNekoSpeed",20);s(this,"minNekoSpeed",10);s(this,"parent",document.body);const t=document.querySelector("[data-neko]");this.isReduced||t||(e&&e.speed&&(this.nekoSpeed=e.speed>this.maxNekoSpeed?this.maxNekoSpeed:e.speed<this.minNekoSpeed?this.minNekoSpeed:e.speed),e&&e.origin&&(this.nekoPosX=e.origin.x,this.nekoPosY=e.origin.y+this.getOffset(this.size),this.mousePosX=this.nekoPosX,this.mousePosY=this.nekoPosY,this.origin.x=e.origin.x,this.origin.y=e.origin.y),e&&e.parent&&(this.parent=e.parent),e&&e.defaultState==="sleep"&&(this.isAwake=!1),this.size=e&&e.nekoSize?e.nekoSize:32,this.nekoId=e&&e.nekoId?e.nekoId:this.nekoId,this.create())}getOffset(e){switch(e){case 32:return 3;case 38:return-2;case 42:return-6}}create(){if(this.nekoEl=document.createElement("div"),this.nekoEl.dataset.neko=`${this.nekoId}`,this.nekoEl.id=`neko-${this.nekoId}`,this.nekoEl.style.width=`${this.size}px`,this.nekoEl.style.height=`${this.size}px`,this.nekoEl.style.left=`${this.nekoPosX-this.size/2}px`,this.nekoEl.style.top=`${this.nekoPosY-this.size/2}px`,this.nekoEl.style.position="fixed",this.nekoEl.style.imageRendering="pixelated",this.nekoEl.style.backgroundImage=`url(${p})`,this.nekoEl.style.backgroundSize="calc(800%) calc(400%)",this.nekoEl.style.userSelect="none",this.nekoEl.style.pointerEvents="none",this.nekoEl.style.zIndex="5",this.parent.appendChild(this.nekoEl),window.nekoInterval=setInterval(this.frame.bind(this),60),!this.isAwake){this.idle();return}this.parent.addEventListener("mousemove",e=>{this.mousePosX=e.clientX,this.mousePosY=e.clientY},{signal:this.mouseMoveController.signal}),this.parent.addEventListener("touchmove",e=>{this.mousePosX=e.touches[0].clientX,this.mousePosY=e.touches[0].clientY},{signal:this.touchController.signal})}setSprite(e,t){const i=this.spriteSets[e][t%this.spriteSets[e].length];this.nekoEl.style.backgroundPosition=`${i[0]*this.size}px ${i[1]*this.size}px`}resetIdleAnimation(){this.idleAnimation=null,this.idleAnimationFrame=0}idle(){if(this.idleTime+=1,this.idleTime>5&&Math.floor(Math.random()*100)==0&&this.idleAnimation==null){let e=["sleeping","scratchSelf"];this.nekoPosX<32&&e.push("scratchWallW"),this.nekoPosY<32&&e.push("scratchWallN"),this.nekoPosX>window.innerWidth-32&&e.push("scratchWallE"),this.nekoPosY>window.innerHeight-32&&e.push("scratchWallS"),this.idleAnimation=e[Math.floor(Math.random()*e.length)]}switch(this.idleAnimation){case"sleeping":if(this.idleAnimationFrame<8){this.setSprite("tired",0);break}this.setSprite("sleeping",Math.floor(this.idleAnimationFrame/4)),this.idleAnimationFrame>192&&this.resetIdleAnimation();break;case"scratchWallN":case"scratchWallS":case"scratchWallE":case"scratchWallW":case"scratchSelf":this.setSprite(this.idleAnimation,this.idleAnimationFrame),this.idleAnimationFrame>9&&this.resetIdleAnimation();break;default:this.setSprite("idle",0);return}this.idleAnimationFrame+=1}frame(){this.frameCount+=1;const e=this.nekoPosX-this.mousePosX,t=this.nekoPosY-this.mousePosY,i=Math.sqrt(e**2+t**2);if(i<this.nekoSpeed||i<this.distanceFromMouse){this.idle();return}if(this.idleAnimation=null,this.idleAnimationFrame=0,this.idleTime>1){this.setSprite("alert",0),this.idleTime=Math.min(this.idleTime,7),this.idleTime-=1;return}let o;o=t/i>.5?"N":"",o+=t/i<-.5?"S":"",o+=e/i>.5?"W":"",o+=e/i<-.5?"E":"",this.setSprite(o,this.frameCount),this.nekoPosX-=e/i*this.nekoSpeed,this.nekoPosY-=t/i*this.nekoSpeed,this.nekoPosX=Math.min(Math.max(this.size/2,this.nekoPosX),window.innerWidth-this.size/2),this.nekoPosY=Math.min(Math.max(this.size/2,this.nekoPosY),window.innerHeight-this.size/2),this.nekoEl.style.left=`${this.nekoPosX-this.size/2}px`,this.nekoEl.style.top=`${this.nekoPosY-this.size/2}px`}destroy(e){if(!(e&&e!==this.nekoId)){const t=document.querySelector(`[data-neko="neko-${this.nekoId}"]`);t&&(t.remove(),clearInterval(window.nekoInterval),this.nekoEl.remove())}}sleep(){this.isAwake&&(this.mouseMoveController.abort(),this.touchController.abort(),this.mousePosX=this.origin.x,this.mousePosY=this.origin.y-15,this.isAwake=!1)}wake(){this.isAwake||(this.mouseMoveController=new AbortController,this.touchController=new AbortController,this.parent.addEventListener("mousemove",e=>{this.mousePosX=e.clientX,this.mousePosY=e.clientY},{signal:this.mouseMoveController.signal}),this.parent.addEventListener("touchmove",e=>{this.mousePosX=e.touches[0].clientX,this.mousePosY=e.touches[0].clientY},{signal:this.touchController.signal}),this.isAwake=!0)}setSize(e){this.size=e,this.nekoEl.style.width=`${this.size}px`,this.nekoEl.style.height=`${this.size}px`}}function A(){const n=document.createElement("div");n.id="app";const e=document.createElement("div");e.id="nekoContainer",n.appendChild(e);const t=document.createElement("div");t.id="restingPlace",e.appendChild(t);let i=null;document.addEventListener("DOMContentLoaded",()=>{i=new f({nekoId:1,nekoSize:k.SMALL,speed:10,origin:{x:t.offsetLeft+t.offsetWidth/2,y:t.offsetTop+t.offsetHeight/2},parent:e,defaultState:"sleep"})});const o=document.createElement("button"),l=document.createElement("button");l.disabled=!!(i&&i.isAwake),o.disabled=!(i&&i.isAwake),o.id="disable",o.innerText="Sleep",o.onclick=()=>{i&&i.isAwake&&(i.sleep(),o.disabled=!0,l.disabled=!1)},l.id="enable",l.innerText="Wake up ",l.onclick=()=>{i&&!i.isAwake&&(i.wake(),o.disabled=!1,l.disabled=!0)};const a=document.createElement("div");return a.className="row",a.appendChild(o),a.appendChild(l),n.appendChild(a),n}const g={title:"Neko/NekoDemo",parameters:{layout:"fullscreen"}},h={render:()=>A()};var r,d,c;h.parameters={...h.parameters,docs:{...(r=h.parameters)==null?void 0:r.docs,source:{originalSource:`{
  render: () => RenderPage()
}`,...(c=(d=h.parameters)==null?void 0:d.docs)==null?void 0:c.source}}};const E=["BaseDemo"];export{h as BaseDemo,E as __namedExportsOrder,g as default};
//# sourceMappingURL=Neko.stories-e7c25699.js.map
